var ownid,remotelist="http://assets.idiomag.com/ext/network.js",loaded=false;function showExchange(){ownid=chrome.extension.getURL().match(/\/\/(.*)\//)[1];loaded?loadAdvert():loadScript(remotelist+"?"+Math.random(),loadAdvert)}function loadAdvert(){var a=choose(ownid);display(a)}function choose(){shuffle(exc);for(var a=0;a<exc.length;a++)if(exc[a].id!=ownid)return exc[a]}function shuffle(a){for(var c,b,d=a.length;d;c=parseInt(Math.random()*d),b=a[--d],a[d]=a[c],a[c]=b);return a}
function display(a){document.getElementById("exchange").innerHTML='Like this extension? Why not try <span id="exchange_link" title="'+a.link+'">'+a.title+"</span>!";document.getElementById("exchange_link").addEventListener("click",openExchange,true)}function openExchange(a){item=a.currentTarget;chrome.tabs.create({url:item.title})}
function loadScript(a,c){var b=document.createElement("script");b.type="text/javascript";b.onload=function(){loaded=true;c()};b.src=a;document.getElementsByTagName("head")[0].appendChild(b)};